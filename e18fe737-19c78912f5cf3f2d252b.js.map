{"version":3,"file":"e18fe737-19c78912f5cf3f2d252b.js","mappings":"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","sources":["webpack://yanzhi-tech-official/./node_modules/pdfjs-dist/build/pdf.mjs"],"sourcesContent":["/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/******/ // The require scope\n/******/ var __webpack_require__ = {};\n/******/ \n/************************************************************************/\n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n/******/ \t// define getter functions for harmony exports\n/******/ \t__webpack_require__.d = (exports, definition) => {\n/******/ \t\tfor(var key in definition) {\n/******/ \t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n/******/ \t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ })();\n/******/ \n/************************************************************************/\nvar __webpack_exports__ = globalThis.pdfjsLib = {};\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  AbortException: () => (/* reexport */ AbortException),\n  AnnotationEditorLayer: () => (/* reexport */ AnnotationEditorLayer),\n  AnnotationEditorParamsType: () => (/* reexport */ AnnotationEditorParamsType),\n  AnnotationEditorType: () => (/* reexport */ AnnotationEditorType),\n  AnnotationEditorUIManager: () => (/* reexport */ AnnotationEditorUIManager),\n  AnnotationLayer: () => (/* reexport */ AnnotationLayer),\n  AnnotationMode: () => (/* reexport */ AnnotationMode),\n  CMapCompressionType: () => (/* reexport */ CMapCompressionType),\n  ColorPicker: () => (/* reexport */ ColorPicker),\n  DOMSVGFactory: () => (/* reexport */ DOMSVGFactory),\n  DrawLayer: () => (/* reexport */ DrawLayer),\n  FeatureTest: () => (/* reexport */ util_FeatureTest),\n  GlobalWorkerOptions: () => (/* reexport */ GlobalWorkerOptions),\n  ImageKind: () => (/* reexport */ util_ImageKind),\n  InvalidPDFException: () => (/* reexport */ InvalidPDFException),\n  MissingPDFException: () => (/* reexport */ MissingPDFException),\n  OPS: () => (/* reexport */ OPS),\n  Outliner: () => (/* reexport */ Outliner),\n  PDFDataRangeTransport: () => (/* reexport */ PDFDataRangeTransport),\n  PDFDateString: () => (/* reexport */ PDFDateString),\n  PDFWorker: () => (/* reexport */ PDFWorker),\n  PasswordResponses: () => (/* reexport */ PasswordResponses),\n  PermissionFlag: () => (/* reexport */ PermissionFlag),\n  PixelsPerInch: () => (/* reexport */ PixelsPerInch),\n  RenderingCancelledException: () => (/* reexport */ RenderingCancelledException),\n  TextLayer: () => (/* reexport */ TextLayer),\n  UnexpectedResponseException: () => (/* reexport */ UnexpectedResponseException),\n  Util: () => (/* reexport */ Util),\n  VerbosityLevel: () => (/* reexport */ VerbosityLevel),\n  XfaLayer: () => (/* reexport */ XfaLayer),\n  build: () => (/* reexport */ build),\n  createValidAbsoluteUrl: () => (/* reexport */ createValidAbsoluteUrl),\n  fetchData: () => (/* reexport */ fetchData),\n  getDocument: () => (/* reexport */ getDocument),\n  getFilenameFromUrl: () => (/* reexport */ getFilenameFromUrl),\n  getPdfFilenameFromUrl: () => (/* reexport */ getPdfFilenameFromUrl),\n  getXfaPageViewport: () => (/* reexport */ getXfaPageViewport),\n  isDataScheme: () => (/* reexport */ isDataScheme),\n  isPdfFile: () => (/* reexport */ isPdfFile),\n  noContextMenu: () => (/* reexport */ noContextMenu),\n  normalizeUnicode: () => (/* reexport */ normalizeUnicode),\n  renderTextLayer: () => (/* reexport */ renderTextLayer),\n  setLayerDimensions: () => (/* reexport */ setLayerDimensions),\n  shadow: () => (/* reexport */ shadow),\n  updateTextLayer: () => (/* reexport */ updateTextLayer),\n  version: () => (/* reexport */ version)\n});\n\n;// CONCATENATED MODULE: ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6;\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === \"string\") {\n      if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n        const dots = url.match(/\\./g);\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch {}\n      }\n    }\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch {}\n  return null;\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"MissingPDFException\");\n  }\n}\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, \"UnexpectedResponseException\");\n    this.status = status;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get platform() {\n    if (typeof navigator !== \"undefined\" && typeof navigator?.platform === \"string\") {\n      return shadow(this, \"platform\", {\n        isMac: navigator.platform.includes(\"Mac\")\n      });\n    }\n    return shadow(this, \"platform\", {\n      isMac: false\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = this.applyTransform(r, m);\n    const p2 = this.applyTransform(r.slice(2, 4), m);\n    const p3 = this.applyTransform([r[0], r[3]], m);\n    const p4 = this.applyTransform([r[2], r[1]], m);\n    return [Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1])];\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], x0, x3);\n      minMax[1] = Math.min(minMax[1], y0, y3);\n      minMax[2] = Math.max(minMax[2], x0, x3);\n      minMax[3] = Math.max(minMax[3], y0, y3);\n    } else {\n      minMax = [Math.min(x0, x3), Math.min(y0, y3), Math.max(x0, x3), Math.max(y0, y3)];\n    }\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n    return minMax;\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (!decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"\", \"t\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto !== \"undefined\" && typeof crypto?.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  if (typeof crypto !== \"undefined\" && typeof crypto?.getRandomValues === \"function\") {\n    crypto.getRandomValues(buf);\n  } else {\n    for (let i = 0; i < 32; i++) {\n      buf[i] = Math.floor(Math.random() * 255);\n    }\n  }\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nconst FontRenderOps = {\n  BEZIER_CURVE_TO: 0,\n  MOVE_TO: 1,\n  LINE_TO: 2,\n  QUADRATIC_CURVE_TO: 3,\n  RESTORE: 4,\n  SAVE: 5,\n  SCALE: 6,\n  TRANSFORM: 7,\n  TRANSLATE: 8\n};\n\n;// CONCATENATED MODULE: ./src/display/base_factory.js\n\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      unreachable(\"Cannot initialize BaseFilterFactory.\");\n    }\n  }\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  } = {}) {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error('The CMap \"baseUrl\" parameter must be specified, ensure that ' + 'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.');\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed ? CMapCompressionType.BINARY : CMapCompressionType.NONE;\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  _fetchData(url, compressionType) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error('The standard font \"baseUrl\" parameter must be specified, ensure that ' + 'the \"standardFontDataUrl\" API parameter is provided.');\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetchData(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  _fetchData(url) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/display_utils.js\n\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#hcmCache.size !== 0) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  } = {}) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\").then(data => ({\n      cMapData: data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data),\n      compressionType\n    }));\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return fetchData(url, \"arraybuffer\").then(data => new Uint8Array(data));\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const {\n      viewBox\n    } = this;\n    return shadow(this, \"rawDims\", {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  try {\n    const {\n      protocol\n    } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch {\n    return false;\n  }\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nlet pdfDateStringRegex;\nclass PDFDateString {\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    pdfDateStringRegex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--scale-factor) * ${pageWidth}px`,\n      h = `var(--scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(${w}, 1px)` : `calc(${w})`,\n      heightStr = useRound ? `round(${h}, 1px)` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n      signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n  }\n  #addDeleteButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-editor-remove-${this.#editor.editorType}-button`);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      this.#editor._uiManager.delete();\n    }, {\n      signal: this.#editor._uiManager._signal\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  addAltTextButton(button) {\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal: this.#uiManager._signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    }, {\n      signal\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity))).toString(16).padStart(2, \"0\");\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else {\n        image = data.file = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      console.error(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  #enableHighlightFloatingButton = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #boundBlur = this.blur.bind(this);\n  #boundFocus = this.focus.bind(this);\n  #boundCopy = this.copy.bind(this);\n  #boundCut = this.cut.bind(this);\n  #boundPaste = this.paste.bind(this);\n  #boundKeydown = this.keydown.bind(this);\n  #boundKeyup = this.keyup.bind(this);\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, mlManager) {\n    this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this._eventBus = eventBus;\n    this._eventBus._on(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._on(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._on(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._on(\"rotationchanging\", this.#boundOnRotationChanging);\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n  }\n  destroy() {\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    this._eventBus._off(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._off(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._off(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._off(\"rotationchanging\", this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n  }\n  async mlGuess(data) {\n    return this.#mlManager?.guess(data) || null;\n  }\n  get hasMLManager() {\n    return !!this.#mlManager;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor) {\n    this.#altTextManager?.editAltText(this, editor);\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    if (this.#mode === AnnotationEditorType.NONE) {\n      this._eventBus.dispatch(\"showannotationeditorui\", {\n        source: this,\n        mode: AnnotationEditorType.HIGHLIGHT\n      });\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        layer.createAndAddNewEditor({\n          x: 0,\n          y: 0\n        }, false, {\n          methodOfCreation,\n          boxes,\n          anchorNode,\n          anchorOffset,\n          focusNode,\n          focusOffset,\n          text\n        });\n        break;\n      }\n    }\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const signal = this._signal;\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        window.removeEventListener(\"pointerup\", pointerup);\n        window.removeEventListener(\"blur\", pointerup);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup, {\n        signal\n      });\n      window.addEventListener(\"blur\", pointerup, {\n        signal\n      });\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    const signal = this._signal;\n    window.addEventListener(\"focus\", this.#boundFocus, {\n      signal\n    });\n    window.addEventListener(\"blur\", this.#boundBlur, {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    window.removeEventListener(\"focus\", this.#boundFocus);\n    window.removeEventListener(\"blur\", this.#boundBlur);\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    const signal = this._signal;\n    window.addEventListener(\"keydown\", this.#boundKeydown, {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.#boundKeyup, {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    window.removeEventListener(\"keydown\", this.#boundKeydown);\n    window.removeEventListener(\"keyup\", this.#boundKeyup);\n  }\n  #addCopyPasteListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"copy\", this.#boundCopy, {\n      signal\n    });\n    document.addEventListener(\"cut\", this.#boundCut, {\n      signal\n    });\n    document.addEventListener(\"paste\", this.#boundPaste, {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    document.removeEventListener(\"copy\", this.#boundCopy);\n    document.removeEventListener(\"cut\", this.#boundCut);\n    document.removeEventListener(\"paste\", this.#boundPaste);\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      return;\n    }\n    this.setEditingState(true);\n    this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId && isFromKeyboard) {\n      this.addNewEditorFromKeyboard();\n      return;\n    }\n    if (!editId) {\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n        break;\n      }\n    }\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      mode\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor();\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = \"\";\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #editor = null;\n  static _l10nPromise = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  static initialize(l10nPromise) {\n    AltText._l10nPromise ||= l10nPromise;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    const msg = await AltText._l10nPromise.get(\"pdfjs-editor-alt-text-button-label\");\n    altText.textContent = msg;\n    altText.setAttribute(\"aria-label\", msg);\n    altText.tabIndex = \"0\";\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative\n  }) {\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    this.#altText = altText;\n    this.#altTextDecorative = decorative;\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextTooltip = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (!this.#altText && !this.#altTextDecorative) {\n      button.classList.remove(\"done\");\n      this.#altTextTooltip?.remove();\n      return;\n    }\n    button.classList.add(\"done\");\n    AltText._l10nPromise.get(\"pdfjs-editor-alt-text-edit-button-label\").then(msg => {\n      button.setAttribute(\"aria-label\", msg);\n    });\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      const id = tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      button.setAttribute(\"aria-describedby\", id);\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    tooltip.innerText = this.#altTextDecorative ? await AltText._l10nPromise.get(\"pdfjs-editor-alt-text-decorative-tooltip\") : this.#altText;\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getImageForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/editor.js\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #savedDimensions = null;\n  #boundFocusin = this.focusin.bind(this);\n  #boundFocusout = this.focusout.bind(this);\n  #editToolbar = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialPosition = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  _initialOptions = Object.create(null);\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  _l10nPromise = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      unreachable(\"Cannot initialize AnnotationEditor.\");\n    }\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager, options) {\n    AnnotationEditor._l10nPromise ||= new Map([\"pdfjs-editor-alt-text-button-label\", \"pdfjs-editor-alt-text-edit-button-label\", \"pdfjs-editor-alt-text-decorative-tooltip\", \"pdfjs-editor-resizer-label-topLeft\", \"pdfjs-editor-resizer-label-topMiddle\", \"pdfjs-editor-resizer-label-topRight\", \"pdfjs-editor-resizer-label-middleRight\", \"pdfjs-editor-resizer-label-bottomRight\", \"pdfjs-editor-resizer-label-bottomMiddle\", \"pdfjs-editor-resizer-label-bottomLeft\", \"pdfjs-editor-resizer-label-middleLeft\"].map(str => [str, l10n.get(str.replaceAll(/([A-Z])/g, c => `-${c.toLowerCase()}`))]));\n    if (options?.strings) {\n      for (const str of options.strings) {\n        AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n      }\n    }\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialPosition ||= [this.x, this.y];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  drag(tx, ty) {\n    this.#initialPosition ||= [this.x, this.y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    this.div.style.left = `${(100 * x).toFixed(2)}%`;\n    this.div.style.top = `${(100 * y).toFixed(2)}%`;\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  get _hasBeenMoved() {\n    return !!this.#initialPosition && (this.#initialPosition[0] !== this.x || this.#initialPosition[1] !== this.y);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = Math.max(0, Math.min(pageWidth - width, x));\n          y = Math.max(0, Math.min(pageHeight - height, y));\n          break;\n        case 90:\n          x = Math.max(0, Math.min(pageWidth - height, x));\n          y = Math.min(pageHeight, Math.max(width, y));\n          break;\n        case 180:\n          x = Math.min(pageWidth, Math.max(width, x));\n          y = Math.min(pageHeight, Math.max(height, y));\n          break;\n        case 270:\n          x = Math.min(pageWidth, Math.max(height, x));\n          y = Math.max(0, Math.min(pageHeight - width, y));\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = this.div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    const scaledWidth = pageWidth * parentScale;\n    const scaledHeight = pageHeight * parentScale;\n    return util_FeatureTest.isCSSRoundSupported ? [Math.round(scaledWidth), Math.round(scaledHeight)] : [scaledWidth, scaledHeight];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      this.div.style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const boundResizerPointermove = this.#resizerPointermove.bind(this, name);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    const signal = this._uiManager._signal;\n    const pointerMoveOptions = {\n      passive: true,\n      capture: true,\n      signal\n    };\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", boundResizerPointermove, pointerMoveOptions);\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\"pointermove\", boundResizerPointermove, pointerMoveOptions);\n      window.removeEventListener(\"contextmenu\", noContextMenu);\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight) {\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: () => {\n        this.width = newWidth;\n        this.height = newHeight;\n        this.x = newX;\n        this.y = newY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n        this.fixAndSetPosition();\n      },\n      undo: () => {\n        this.width = savedWidth;\n        this.height = savedHeight;\n        this.x = savedX;\n        this.y = savedY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n        this.fixAndSetPosition();\n      },\n      mustExec: true\n    });\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const round = x => Math.round(x * 10000) / 10000;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = round(savedX + transfOppositePoint[0]);\n    const oppositeY = round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let [deltaX, deltaY] = this.screenToPageTranslation(event.movementX, event.movementY);\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = Math.max(minWidth, Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))) / savedWidth;\n    } else {\n      ratioY = Math.max(minHeight, Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))) / savedHeight;\n    }\n    const newWidth = round(savedWidth * ratioX);\n    const newHeight = round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n  }\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this.#editToolbar || this.#isInEditMode) {\n      return this.#editToolbar;\n    }\n    this.#editToolbar = new EditorToolbar(this);\n    this.div.append(this.#editToolbar.render());\n    if (this.#altText) {\n      this.#editToolbar.addAltTextButton(await this.#altText.render());\n    }\n    return this.#editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this.#editToolbar) {\n      return;\n    }\n    this.#editToolbar.remove();\n    this.#editToolbar = null;\n    this.#altText?.destroy();\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10nPromise);\n    this.#altText = new AltText(this);\n    if (this.#accessibilityData) {\n      this.#altText.data = this.#accessibilityData;\n      this.#accessibilityData = null;\n    }\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  hasAltText() {\n    return !this.#altText?.isEmpty();\n  }\n  render() {\n    this.div = document.createElement(\"div\");\n    this.div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute(\"id\", this.id);\n    this.div.tabIndex = this.#disabled ? -1 : 0;\n    if (!this._isVisible) {\n      this.div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    const signal = this._uiManager._signal;\n    this.div.addEventListener(\"focusin\", this.#boundFocusin, {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.#boundFocusout, {\n      signal\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      this.div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      this.div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, this.div, [\"pointerdown\"]);\n    return this.div;\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const isSelected = this._uiManager.isSelected(this);\n    this._uiManager.setUpDragSession();\n    let pointerMoveOptions, pointerMoveCallback;\n    const signal = this._uiManager._signal;\n    if (isSelected) {\n      this.div.classList.add(\"moving\");\n      pointerMoveOptions = {\n        passive: true,\n        capture: true,\n        signal\n      };\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      pointerMoveCallback = e => {\n        const {\n          clientX: x,\n          clientY: y\n        } = e;\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      };\n      window.addEventListener(\"pointermove\", pointerMoveCallback, pointerMoveOptions);\n    }\n    const pointerUpCallback = () => {\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      if (isSelected) {\n        this.div.classList.remove(\"moving\");\n        window.removeEventListener(\"pointermove\", pointerMoveCallback, pointerMoveOptions);\n      }\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(event);\n      }\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded() {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  rebuild() {\n    const signal = this._uiManager._signal;\n    this.div?.addEventListener(\"focusin\", this.#boundFocusin, {\n      signal\n    });\n    this.div?.addEventListener(\"focusout\", this.#boundFocusout, {\n      signal\n    });\n  }\n  rotate(_angle) {}\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.div.removeEventListener(\"focusin\", this.#boundFocusin);\n    this.div.removeEventListener(\"focusout\", this.#boundFocusout);\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n      bindEvents(this, this.div, [\"keydown\"]);\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        AnnotationEditor._l10nPromise.get(`pdfjs-editor-resizer-label-${name}`).then(msg => div.setAttribute(\"aria-label\", msg));\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        AnnotationEditor._l10nPromise.get(`pdfjs-editor-resizer-label-${name}`).then(msg => child.setAttribute(\"aria-label\", msg));\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      movementX: x,\n      movementY: y\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    if (this.#savedDimensions) {\n      const {\n        savedX,\n        savedY,\n        savedWidth,\n        savedHeight\n      } = this.#savedDimensions;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n      this.#savedDimensions = null;\n    }\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this.#editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this.#editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this.#editToolbar?.show();\n  }\n  unselect() {\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this.#editToolbar?.hide();\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  enterInEditMode() {}\n  getImageForAltText() {\n    return null;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex\n    };\n  }\n}\n\n;// CONCATENATED MODULE: ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  getAll() {\n    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;\n  }\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!this.disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    let supported = false;\n    if (isNodeJS) {\n      supported = true;\n    } else if (typeof navigator !== \"undefined\" && typeof navigator?.userAgent === \"string\" && /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)) {\n      supported = true;\n    }\n    return shadow(this, \"isSyncFontLoadingSupported\", supported);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, {\n    disableFontFace = false,\n    inspectFont = null\n  }) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.disableFontFace = disableFontFace === true;\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    if (!Array.isArray(cmds) || cmds.length === 0) {\n      return this.compiledGlyphs[character] = function (c, size) {};\n    }\n    const commands = [];\n    for (let i = 0, ii = cmds.length; i < ii;) {\n      switch (cmds[i++]) {\n        case FontRenderOps.BEZIER_CURVE_TO:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push(ctx => ctx.bezierCurveTo(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.MOVE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.moveTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.LINE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.lineTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.QUADRATIC_CURVE_TO:\n          {\n            const [a, b, c, d] = cmds.slice(i, i + 4);\n            commands.push(ctx => ctx.quadraticCurveTo(a, b, c, d));\n            i += 4;\n          }\n          break;\n        case FontRenderOps.RESTORE:\n          commands.push(ctx => ctx.restore());\n          break;\n        case FontRenderOps.SAVE:\n          commands.push(ctx => ctx.save());\n          break;\n        case FontRenderOps.SCALE:\n          assert(commands.length === 2, \"Scale command is only valid at the third position.\");\n          break;\n        case FontRenderOps.TRANSFORM:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push(ctx => ctx.transform(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.TRANSLATE:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.translate(a, b));\n            i += 2;\n          }\n          break;\n      }\n    }\n    return this.compiledGlyphs[character] = function glyphDrawer(ctx, size) {\n      commands[0](ctx);\n      commands[1](ctx);\n      ctx.scale(size, -size);\n      for (let i = 2, ii = commands.length; i < ii; i++) {\n        commands[i](ctx);\n      }\n    };\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/node_utils.js\n\n\nif (isNodeJS) {\n  var packageCapability = Promise.withResolvers();\n  var packageMap = null;\n  const loadPackages = async () => {\n    const fs = await import( /*webpackIgnore: true*/\"fs\"),\n      http = await import( /*webpackIgnore: true*/\"http\"),\n      https = await import( /*webpackIgnore: true*/\"https\"),\n      url = await import( /*webpackIgnore: true*/\"url\");\n    let canvas, path2d;\n    return new Map(Object.entries({\n      fs,\n      http,\n      https,\n      url,\n      canvas,\n      path2d\n    }));\n  };\n  loadPackages().then(map => {\n    packageMap = map;\n    packageCapability.resolve();\n  }, reason => {\n    warn(`loadPackages: ${reason}`);\n    packageMap = new Map();\n    packageCapability.resolve();\n  });\n}\nclass NodePackages {\n  static get promise() {\n    return packageCapability.promise;\n  }\n  static get(name) {\n    return packageMap?.get(name);\n  }\n}\nconst node_utils_fetchData = function (url) {\n  const fs = NodePackages.get(\"fs\");\n  return fs.promises.readFile(url).then(data => new Uint8Array(data));\n};\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const canvas = NodePackages.get(\"canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return node_utils_fetchData(url).then(data => ({\n      cMapData: data,\n      compressionType\n    }));\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height, true);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight, false);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));\n    } else {\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(this.baseTransform);\n    const combinedScale = [matrixScale[0] * curMatrixScale[0], matrixScale[1] * curMatrixScale[1]];\n    const dimx = this.getSizeAndScale(xstep, this.ctx.canvas.width, combinedScale[0]);\n    const dimy = this.getSizeAndScale(ystep, this.ctx.canvas.height, combinedScale[1]);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size, true);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    step = Math.abs(step);\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [x0, y0, x1, y1]);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst MAX_SIZE_TO_COMPILE = 1000;\nconst FULL_CHUNK_HEIGHT = 16;\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nfunction compileType3Glyph(imgData) {\n  const {\n    width,\n    height\n  } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n  const lineSize = width + 7 & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        type = pp;\n        points[p] = 0;\n      } else {\n        type = pp & 0x33 * type >> 4;\n        points[p] &= type >> 2 | type << 2;\n      }\n      path.lineTo(p % width1, p / width1 | 0);\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n  data = null;\n  points = null;\n  const drawOutline = function (c) {\n    c.save();\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n  return drawOutline;\n}\nclass CanvasExtraState {\n  constructor(width, height) {\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    this.x = 0;\n    this.y = 0;\n    this.lineX = 0;\n    this.lineY = 0;\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = \"none\";\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    const p3 = Util.applyTransform([rect[0], rect[3]], transform);\n    const p4 = Util.applyTransform([rect[2], rect[1]], transform);\n    this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);\n  }\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.minY = Math.min(this.minY, minMax[1]);\n    this.maxX = Math.max(this.maxX, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax);\n    if (minMax) {\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = scale[0] * this.lineWidth / 2;\n      const yStrokePad = scale[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (!isNodeJS) {\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  const scale = Util.singularValueDecompose2dScale(transform);\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround((globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return scale[0] <= actualScale && scale[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const [minX, minY, maxX, maxY] = Util.getAxialAlignedBoundingBox([0, 0, width, height], maskToCanvas);\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...getCurrentTransform(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        if (backdrop.some(c => c !== 0)) {\n          ctx.globalCompositeOperation = \"destination-atop\";\n          ctx.fillStyle = Util.makeHexColor(...backdrop);\n          ctx.fillRect(0, 0, width, height);\n          ctx.globalCompositeOperation = \"source-over\";\n        }\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else if (backdrop.some(c => c !== 0)) {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = Util.makeHexColor(...backdrop);\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n      this.pendingClip = null;\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = getCurrentTransform(ctx);\n    const isScalingMatrix = currentTransform[0] === 0 && currentTransform[3] === 0 || currentTransform[1] === 0 && currentTransform[2] === 0;\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3], x, y);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], args[j + 2], args[j + 3], x, y, minMaxForBezier);\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(x, y, args[j], args[j + 1], args[j + 2], args[j + 3]);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, x, y, args[j], args[j + 1], args[j + 2], args[j + 3], minMaxForBezier);\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], x, y, x, y, minMaxForBezier);\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n    current.setCurrentPoint(x, y);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        this.rescaleAndStroke(false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(\"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n    this.consumePath();\n  }\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n  endPath() {\n    this.consumePath();\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fill();\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, color, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n  setFillRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const [x0, y0, x1, y1] = Util.getAxialAlignedBoundingBox([0, 0, width, height], inv);\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = Util.getAxialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx));\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx));\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    if (!isNodeJS) {\n      const {\n        filter\n      } = ctx;\n      if (filter !== \"none\" && filter !== \"\") {\n        ctx.filter = \"none\";\n      }\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(saveRestore) {\n    const {\n      ctx\n    } = this;\n    const {\n      lineWidth\n    } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    ctx.lineWidth = lineWidth || 1;\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.stroke();\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction wrapReason(reason) {\n  if (!(reason instanceof Error || typeof reason === \"object\" && reason !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new MissingPDFException(reason.message);\n    case \"PasswordException\":\n      return new PasswordException(reason.message, reason.code);\n    case \"UnexpectedResponseException\":\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(function (result) {\n          comObj.postMessage({\n            sourceName: cbSourceName,\n            targetName: cbTargetName,\n            callback: CallbackKind.DATA,\n            callbackId: data.callbackId,\n            data: result\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName: cbSourceName,\n            targetName: cbTargetName,\n            callback: CallbackKind.ERROR,\n            callbackId: data.callbackId,\n            reason: wrapReason(reason)\n          });\n        });\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/metadata.js\n\nclass Metadata {\n  #metadataMap;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          group._setVisible(INTERNAL, true);\n          break;\n        case \"OFF\":\n          group._setVisible(INTERNAL, false);\n          break;\n        case \"Toggle\":\n          group._setVisible(INTERNAL, !group.visible);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroups() {\n    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// CONCATENATED MODULE: ./src/display/network_utils.js\n\n\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || status === 0 && url.startsWith(\"file:\")) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status);\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// CONCATENATED MODULE: ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = this.isHttp && source.httpHeaders || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._headers = createHeaders(this._stream.httpHeaders);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseStatusError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const getResponseHeader = name => response.headers.get(name);\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: this._stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseStatusError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = this.isHttp && args.httpHeaders || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    const getResponseHeader = name => fullRequestXhr.getResponseHeader(name);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      getResponseHeader,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersReceivedCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/node_stream.js\n\n\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\nfunction parseUrl(sourceUrl) {\n  const url = NodePackages.get(\"url\");\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp = this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = this.isHttp && source.httpHeaders || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = this.isFsUrl ? new PDFNodeStreamFsFullReader(this) : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl ? new PDFNodeStreamFsRangeReader(this, start, end) : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers\n  };\n}\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n      const getResponseHeader = name => this._readableStream.headers[name.toLowerCase()];\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      const http = NodePackages.get(\"http\");\n      this._request = http.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);\n    } else {\n      const https = NodePackages.get(\"https\");\n      this._request = https.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);\n    }\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      const http = NodePackages.get(\"http\");\n      this._request = http.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);\n    } else {\n      const https = NodePackages.get(\"https\");\n      this._request = https.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);\n    }\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n    const fs = NodePackages.get(\"fs\");\n    fs.promises.lstat(path).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(path));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = new MissingPDFException(`Missing PDF \"${path}\".`);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n}\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n    const fs = NodePackages.get(\"fs\");\n    this._setReadableStream(fs.createReadStream(path, {\n      start,\n      end: end - 1\n    }));\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.catch(() => {}).then(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    });\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        prevFontSize: null,\n        prevFontFamily: null,\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    const fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--scale-factor)*\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx,\n      prevFontSize,\n      prevFontFamily\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n        ctx.font = `${fontSize * this.#scale}px ${fontFamily}`;\n        params.prevFontSize = fontSize;\n        params.prevFontFamily = fontFamily;\n      }\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let canvasContext = this.#canvasContexts.get(lang ||= \"\");\n    if (!canvasContext) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      canvasContext = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, canvasContext);\n    }\n    return canvasContext;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    const savedFont = ctx.font;\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n    const metrics = ctx.measureText(\"\");\n    let ascent = metrics.fontBoundingBoxAscent;\n    let descent = Math.abs(metrics.fontBoundingBoxDescent);\n    if (ascent) {\n      const ratio = ascent / (ascent + descent);\n      this.#ascentCache.set(fontFamily, ratio);\n      ctx.canvas.width = ctx.canvas.height = 0;\n      ctx.font = savedFont;\n      return ratio;\n    }\n    ctx.strokeStyle = \"red\";\n    ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n    ctx.strokeText(\"g\", 0, 0);\n    let pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n    descent = 0;\n    for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n      if (pixels[i] > 0) {\n        descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n        break;\n      }\n    }\n    ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n    ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n    pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n    ascent = 0;\n    for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n      if (pixels[i] > 0) {\n        ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n        break;\n      }\n    }\n    ctx.canvas.width = ctx.canvas.height = 0;\n    ctx.font = savedFont;\n    const ratio = ascent ? ascent / (ascent + descent) : DEFAULT_FONT_ASCENT;\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\nfunction renderTextLayer() {\n  deprecated(\"`renderTextLayer`, please use `TextLayer` instead.\");\n  const {\n    textContentSource,\n    container,\n    viewport,\n    ...rest\n  } = arguments[0];\n  const restKeys = Object.keys(rest);\n  if (restKeys.length > 0) {\n    warn(\"Ignoring `renderTextLayer` parameters: \" + restKeys.join(\", \"));\n  }\n  const textLayer = new TextLayer({\n    textContentSource,\n    container,\n    viewport\n  });\n  const {\n    textDivs,\n    textContentItemsStr\n  } = textLayer;\n  const promise = textLayer.render();\n  return {\n    promise,\n    textDivs,\n    textContentItemsStr\n  };\n}\nfunction updateTextLayer() {\n  deprecated(\"`updateTextLayer`, please use `TextLayer` instead.\");\n}\n\n;// CONCATENATED MODULE: ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536;\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nconst DELAYED_CLEANUP_TIMEOUT = 5000;\nconst DefaultCanvasFactory = isNodeJS ? NodeCanvasFactory : DOMCanvasFactory;\nconst DefaultCMapReaderFactory = isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory;\nconst DefaultFilterFactory = isNodeJS ? NodeFilterFactory : DOMFilterFactory;\nconst DefaultStandardFontDataFactory = isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = typeof src.cMapUrl === \"string\" ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl = typeof src.standardFontDataUrl === \"string\" ? src.standardFontDataUrl : null;\n  const StandardFontDataFactory = src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const enableHWA = src.enableHWA === true;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && cMapUrl && standardFontDataUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI);\n  const canvasFactory = src.canvasFactory || new DefaultCanvasFactory({\n    ownerDocument,\n    enableHWA\n  });\n  const filterFactory = src.filterFactory || new DefaultFilterFactory({\n    docId,\n    ownerDocument\n  });\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory,\n    filterFactory\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    });\n  }\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    };\n    worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"4.4.168\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null\n    }\n  };\n  const transportParams = {\n    disableFontFace,\n    fontExtraProperties,\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      const createPDFNetworkStream = params => {\n        if (isNodeJS) {\n          const isFetchSupported = function () {\n            return typeof fetch !== \"undefined\" && typeof Response !== \"undefined\" && \"body\" in Response.prototype;\n          };\n          return isFetchSupported() && isValidFetchUrl(params.url) ? new PDFFetchStream(params) : new PDFNodeStream(params);\n        }\n        return isValidFetchUrl(params.url) ? new PDFFetchStream(params) : new PDFNetworkStream(params);\n      };\n      networkStream = createPDFNetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    return new URL(val, window.location).href;\n  } catch {\n    if (isNodeJS && typeof val === \"string\") {\n      return val;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction isRefProxy(ref) {\n  return typeof ref === \"object\" && Number.isInteger(ref?.num) && ref.num >= 0 && Number.isInteger(ref?.gen) && ref.gen >= 0;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  constructor() {\n    this._capability = Promise.withResolvers();\n    this._transport = null;\n    this._worker = null;\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n    this.destroyed = false;\n    this.onPassword = null;\n    this.onProgress = null;\n  }\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\nclass PDFDataRangeTransport {\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = Promise.withResolvers();\n  }\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(!intentPrint);\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(false);\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(true);\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup(true);\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass LoopbackPort {\n  #listeners = new Set();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    this.#listeners.clear();\n  }\n}\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fakeWorkerId: 0\n};\n{\n  if (isNodeJS) {\n    PDFWorkerUtil.isWorkerDisabled = true;\n    GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n  }\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === \"null\") {\n        return false;\n      }\n    } catch {\n      return false;\n    }\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    const wrapper = `await import(\"${url}\");`;\n    return URL.createObjectURL(new Blob([wrapper], {\n      type: \"text/javascript\"\n    }));\n  };\n}\nclass PDFWorker {\n  static #workerPorts;\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    this._readyCapability = Promise.withResolvers();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n    if (port) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n  get promise() {\n    if (isNodeJS) {\n      return Promise.all([NodePackages.promise, this._readyCapability.promise]);\n    }\n    return this._readyCapability.promise;\n  }\n  #resolve() {\n    this._readyCapability.resolve();\n    this._messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this._port;\n  }\n  get messageHandler() {\n    return this._messageHandler;\n  }\n  _initializeFromPort(port) {\n    this._port = port;\n    this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {});\n    this.#resolve();\n  }\n  _initialize() {\n    if (PDFWorkerUtil.isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this._setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)) {\n        workerSrc = PDFWorkerUtil.createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this._setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this._webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this._messageHandler = messageHandler;\n        this._port = worker;\n        this._webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this._setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this._setupFakeWorker();\n  }\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this._port = port;\n      const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this._messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this._readyCapability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n  static fromPort(params) {\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.fromPort - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import( /*webpackIgnore: true*/this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationStorageSerializable.hash}`,\n      annotationStorageSerializable\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = Promise.withResolvers();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total\n            });\n          };\n        }\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength\n        });\n      }, headersCapability.reject);\n      return headersCapability.promise;\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable(\"DocException - expected a valid Error.\");\n      }\n      loadingTask._capability.reject(reason);\n    });\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this.#passwordCapability = Promise.withResolvers();\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this.#passwordCapability.reject(ex);\n        }\n      } else {\n        this.#passwordCapability.reject(new PasswordException(exception.message, exception.code));\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          const {\n            disableFontFace,\n            fontExtraProperties,\n            pdfBug\n          } = this._params;\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, {\n            disableFontFace,\n            inspectFont\n          });\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n          if (imageData?.dataLen > MAX_IMAGE_SIZE_TO_CACHE) {\n            pageProxy._maybeCleanupAfterRender = true;\n          }\n          break;\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBuiltInCMap\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(new Error(\"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"));\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n    messageHandler.on(\"FetchStandardFontData\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(new Error(\"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"));\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n    this.onContinue = null;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    this.callback(error || new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay));\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"4.4.168\";\nconst build = \"19fbc8998\";\n\n;// CONCATENATED MODULE: ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/annotation_layer.js\n\n\n\n\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1]\n  };\n}\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    const {\n      width,\n      height\n    } = getRectDims(rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.popupRef) {\n      container.setAttribute(\"aria-haspopup\", \"dialog\");\n    }\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    const {\n      width,\n      height\n    } = getRectDims(this.data.rect);\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = 100 * width / pageWidth;\n      elementHeight = 100 * height / pageHeight;\n    } else {\n      elementWidth = 100 * height / pageWidth;\n      elementHeight = 100 * width / pageHeight;\n    }\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      container,\n      data\n    } = this;\n    container.setAttribute(\"aria-haspopup\", \"dialog\");\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  get _isEditable() {\n    return false;\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      if (CSS.supports(\"background-color\", \"color-mix(in srgb, red 30%, white)\")) {\n        popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n      } else {\n        const BACKGROUND_ENLIGHT = 0.7;\n        popup.style.backgroundColor = Util.makeHexColor(...this.#color.map(c => Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)));\n      }\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        date: this.#dateObj.toLocaleDateString(),\n        time: this.#dateObj.toLocaleTimeString()\n      }));\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  get _isEditable() {\n    return this.data.hasOwnCanvas;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const {\n      width,\n      height\n    } = getRectDims(rect);\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = AnnotationEditorType.INK;\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      width,\n      height\n    } = getRectDims(rect);\n    const svg = this.svgFactory.create(width, height, true);\n    for (const inkList of inkLists) {\n      let points = [];\n      for (let i = 0, ii = inkList.length; i < ii; i += 2) {\n        const x = inkList[i] - rect[0];\n        const y = rect[3] - inkList[i + 1];\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", points);\n      polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"transparent\");\n      if (!popupRef && this.hasPopupData) {\n        this._createPopup();\n      }\n      svg.append(polyline);\n    }\n    this.container.append(svg);\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${AnnotationPrefix}${id}`;\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      this.#appendElement(rendered, data.id);\n      if (element.annotationEditorType > 0) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n  #boundEditorDivPaste = this.editorDivPaste.bind(this);\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #fontSize;\n  #initialData = null;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager, {\n      strings: [\"pdfjs-free-text-default-content\"]\n    });\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    const signal = this._uiManager._signal;\n    this.editorDiv.addEventListener(\"keydown\", this.#boundEditorDivKeydown, {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.#boundEditorDivFocus, {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.#boundEditorDivBlur, {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.#boundEditorDivInput, {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.#boundEditorDivPaste, {\n      signal\n    });\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.editorDiv.removeEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener(\"input\", this.#boundEditorDivInput);\n    this.editorDiv.removeEventListener(\"paste\", this.#boundEditorDivPaste);\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded() {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    for (const child of this.editorDiv.childNodes) {\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text\");\n    this.enableEditing();\n    AnnotationEditor._l10nPromise.get(\"pdfjs-free-text-default-content\").then(msg => this.editorDiv?.setAttribute(\"default-content\", msg));\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    bindEvents(this, this.div, [\"dblclick\", \"keydown\"]);\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this.#initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = bufferBefore.reduce((acc, line) => acc + line.length, 0);\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false\n      };\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor.#initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return {\n        pageIndex: this.pageIndex,\n        id: this.annotationElementId,\n        deleted: true\n      };\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this.#initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/outliner.js\n\nclass Outliner {\n  #box;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      minX = Math.min(minX, x1);\n      maxX = Math.max(maxX, x2);\n      minY = Math.min(minY, y1);\n      maxY = Math.max(maxY, y2);\n    }\n    const bboxWidth = maxX - minX + 2 * innerMargin;\n    const bboxHeight = maxY - minY + 2 * innerMargin;\n    const shiftedMinX = minX - innerMargin;\n    const shiftedMinY = minY - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = {\n      x: shiftedMinX,\n      y: shiftedMinY,\n      width: bboxWidth,\n      height: bboxHeight,\n      lastPoint\n    };\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass Outline {\n  toSVGPath() {\n    throw new Error(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    throw new Error(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    throw new Error(\"Abstract method `serialize` must be implemented.\");\n  }\n  get free() {\n    return this instanceof FreeHighlightOutline;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n}\nclass FreeOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float64Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeOutliner.#MIN_DIST + FreeOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  get free() {\n    return true;\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n    return buffer.join(\" \");\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const lastTop = last.subarray(4, 6);\n    const lastBottom = last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float64Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      const outline = new Float64Array(36);\n      outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n      return new FreeHighlightOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n    }\n    const outline = new Float64Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], N);\n    N += 24;\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], N);\n    return new FreeHighlightOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n}\nclass FreeHighlightOutline extends Outline {\n  #box;\n  #bbox = null;\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.#computeMinMax(isLTR);\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = this.#rescale(this.#outline, blX, trY, width, -height);\n        points = this.#rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = this.#rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = this.#rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = this.#rescale(this.#outline, trX, blY, -width, height);\n        points = this.#rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = this.#rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = this.#rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #rescale(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  #rescaleAndSwap(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    let minX = lastX;\n    let minY = lastY;\n    let maxX = lastX;\n    let maxY = lastY;\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      if (isNaN(outline[i])) {\n        minX = Math.min(minX, outline[i + 4]);\n        minY = Math.min(minY, outline[i + 5]);\n        maxX = Math.max(maxX, outline[i + 4]);\n        maxY = Math.max(maxY, outline[i + 5]);\n        if (lastPointY < outline[i + 5]) {\n          lastPointX = outline[i + 4];\n          lastPointY = outline[i + 5];\n        } else if (lastPointY === outline[i + 5]) {\n          lastPointX = ltrCallback(lastPointX, outline[i + 4]);\n        }\n      } else {\n        const bbox = Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6));\n        minX = Math.min(minX, bbox[0]);\n        minY = Math.min(minY, bbox[1]);\n        maxX = Math.max(maxX, bbox[2]);\n        maxY = Math.max(maxY, bbox[3]);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = outline[i + 4];\n      lastY = outline[i + 5];\n    }\n    const x = minX - this.#innerMargin,\n      y = minY - this.#innerMargin,\n      width = maxX - minX + 2 * this.#innerMargin,\n      height = maxY - minY + 2 * this.#innerMargin;\n    this.#bbox = {\n      x,\n      y,\n      width,\n      height,\n      lastPoint: [lastPointX, lastPointY]\n    };\n  }\n  get box() {\n    return this.#bbox;\n  }\n  getNewOutline(thickness, innerMargin) {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = new FreeOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundPointerDown = this.#pointerDown.bind(this);\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #uiManager = null;\n  #type;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#boundKeyDown, {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", `pdfjs-editor-colorpicker-${name}`);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#boundKeyDown, {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    window.addEventListener(\"pointerdown\", this.#boundPointerDown, {\n      signal: this.#uiManager._signal\n    });\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    window.removeEventListener(\"pointerdown\", this.#boundPointerDown);\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/highlight.js\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #boundKeydown = this.#keydown.bind(this);\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _l10nPromise;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new Outliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    ({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    } = this.#highlightOutlines.box);\n    const outlinerForOutline = new Outliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeLine(highlightId, highlightOutlines);\n      this.#outlineId = this.parent.drawLayer.highlightOutline(this.#focusOutlines);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateLine(this.#id, highlightOutlines);\n      this.parent.drawLayer.updateBox(this.#id, HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360));\n      this.parent.drawLayer.updateLine(this.#outlineId, this.#focusOutlines);\n      this.parent.drawLayer.updateBox(this.#outlineId, HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle));\n    }\n    const {\n      x,\n      y,\n      width,\n      height\n    } = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.parent?.drawLayer.changeColor(this.#id, col);\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded() {\n    this.parent.addUndoableEditor(this);\n    this.div.focus();\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.highlight(this.#highlightOutlines, this.color, this.#opacity));\n    this.#outlineId = parent.drawLayer.highlightOutline(this.#focusOutlines);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox({\n    x,\n    y,\n    width,\n    height\n  }, angle) {\n    switch (angle) {\n      case 90:\n        return {\n          x: 1 - y - height,\n          y: x,\n          width: height,\n          height: width\n        };\n      case 180:\n        return {\n          x: 1 - x - width,\n          y: 1 - y - height,\n          width,\n          height\n        };\n      case 270:\n        return {\n          x: y,\n          y: 1 - x - width,\n          width: height,\n          height: width\n        };\n    }\n    return {\n      x,\n      y,\n      width,\n      height\n    };\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox(this, angle);\n    }\n    drawLayer.rotate(this.#id, angle);\n    drawLayer.rotate(this.#outlineId, angle);\n    drawLayer.updateBox(this.#id, box);\n    drawLayer.updateBox(this.#outlineId, HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle));\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#boundKeydown, {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    this.parent.drawLayer.addClass(this.#outlineId, \"hovered\");\n  }\n  pointerleave() {\n    this.parent.drawLayer.removeClass(this.#outlineId, \"hovered\");\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"hovered\");\n    this.parent?.drawLayer.addClass(this.#outlineId, \"selected\");\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"selected\");\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.show(this.#id, visible);\n      this.parent.drawLayer.show(this.#outlineId, visible);\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth;\n      const sy = (1 - y - height) * pageHeight;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy + height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const pointerMove = e => {\n      this.#highlightMove(parent, e);\n    };\n    const signal = parent._signal;\n    const pointerDownOptions = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const pointerDown = e => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    const pointerUpCallback = e => {\n      textLayer.removeEventListener(\"pointermove\", pointerMove);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"pointerdown\", pointerDown, pointerDownOptions);\n      window.removeEventListener(\"contextmenu\", noContextMenu);\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", pointerDown, pointerDownOptions);\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", pointerMove, {\n      signal\n    });\n    this._freeHighlight = new FreeOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.highlight(this._freeHighlight, this._defaultColor, this._defaultOpacity, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updatePath(this._freeHighlightId, this._freeHighlight);\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.removeFreeHighlight(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n    const {\n      rect: [blX, blY, trX, trY],\n      color,\n      quadPoints\n    } = data;\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    editor.width = (trX - blX) / pageWidth;\n    editor.height = (trY - blY) / pageHeight;\n    const boxes = editor.#boxes = [];\n    for (let i = 0; i < quadPoints.length; i += 8) {\n      boxes.push({\n        x: (quadPoints[4] - trX) / pageWidth,\n        y: (trY - (1 - quadPoints[i + 5])) / pageHeight,\n        width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n        height: (quadPoints[i + 5] - quadPoints[i + 1]) / pageHeight\n      });\n    }\n    editor.#createOutlines();\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    return {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/ink.js\n\n\n\n\n\nclass InkEditor extends AnnotationEditor {\n  #baseHeight = 0;\n  #baseWidth = 0;\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n  #canvasContextMenuTimeoutId = null;\n  #currentPath2D = new Path2D();\n  #disableEditing = false;\n  #hasSomethingToDraw = false;\n  #isCanvasInitialized = false;\n  #observer = null;\n  #realWidth = 0;\n  #realHeight = 0;\n  #requestFrameCallback = null;\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 1;\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n    this._willKeepAspectRatio = true;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness], [AnnotationEditorParamsType.INK_COLOR, InkEditor._defaultColor || AnnotationEditor._defaultLineColor], [AnnotationEditorParamsType.INK_OPACITY, Math.round(InkEditor._defaultOpacity * 100)]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.INK_THICKNESS, this.thickness || InkEditor._defaultThickness], [AnnotationEditorParamsType.INK_COLOR, this.color || InkEditor._defaultColor || AnnotationEditor._defaultLineColor], [AnnotationEditorParamsType.INK_OPACITY, Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity))]];\n  }\n  #updateThickness(thickness) {\n    const setThickness = th => {\n      this.thickness = th;\n      this.#fitToContent();\n    };\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.#redraw();\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateOpacity(opacity) {\n    const setOpacity = op => {\n      this.opacity = op;\n      this.#redraw();\n    };\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: setOpacity.bind(this, opacity),\n      undo: setOpacity.bind(this, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n      this.#canvasContextMenuTimeoutId = null;\n    }\n    this.#observer?.disconnect();\n    this.#observer = null;\n    super.remove();\n  }\n  setParent(parent) {\n    if (!this.parent && parent) {\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n    super.enableEditMode();\n    this._isDraggable = false;\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown, {\n      signal: this._uiManager._signal\n    });\n  }\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n    super.disableEditMode();\n    this._isDraggable = !this.isEmpty();\n    this.div.classList.remove(\"editing\");\n    this.canvas.removeEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n  onceAdded() {\n    this._isDraggable = !this.isEmpty();\n  }\n  isEmpty() {\n    return this.paths.length === 0 || this.paths.length === 1 && this.paths[0].length === 0;\n  }\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height]\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n  #setStroke() {\n    const {\n      ctx,\n      color,\n      opacity,\n      thickness,\n      parentScale,\n      scaleFactor\n    } = this;\n    ctx.lineWidth = thickness * parentScale / scaleFactor;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${opacityToHex(opacity)}`;\n  }\n  #startDrawing(x, y) {\n    const signal = this._uiManager._signal;\n    this.canvas.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.canvas.addEventListener(\"pointerleave\", this.#boundCanvasPointerleave, {\n      signal\n    });\n    this.canvas.addEventListener(\"pointermove\", this.#boundCanvasPointermove, {\n      signal\n    });\n    this.canvas.addEventListener(\"pointerup\", this.#boundCanvasPointerup, {\n      signal\n    });\n    this.canvas.removeEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||= InkEditor._defaultColor || AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n    this.#makeBezierCurve(path2D, ...currentPath.at(-3), ...currentPath.at(-2), x, y);\n  }\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n    this.#draw(x, y);\n    this.#endPath();\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this._uiManager.rebuild(this);\n    };\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map(xy => xy[0]);\n    const y = lastPoints.map(xy => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n    const {\n      ctx\n    } = this;\n    ctx.save();\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n    ctx.restore();\n  }\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n    path2D.bezierCurveTo(prevX + 2 * (x1 - prevX) / 3, prevY + 2 * (y1 - prevY) / 3, x3 + 2 * (x1 - x3) / 3, y3 + 2 * (y1 - y3) / 3, x3, y3);\n  }\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n      const control1 = [x0 + 2 * (x1 - x0) / 3, y0 + 2 * (y1 - y0) / 3];\n      const control2 = [x3 + 2 * (x1 - x3) / 3, y3 + 2 * (y1 - y3) / 3];\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n      [x0, y0] = [x3, y3];\n    }\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n    const control1 = [x0 + 2 * (x1 - x0) / 3, y0 + 2 * (y1 - y0) / 3];\n    const control2 = [x2 + 2 * (x1 - x2) / 3, y2 + 2 * (y1 - y2) / 3];\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n    const {\n      canvas,\n      ctx\n    } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n    super.commit();\n    this.isEditing = false;\n    this.disableEditMode();\n    this.setInForeground();\n    this.#disableEditing = true;\n    this.div.classList.add(\"disabled\");\n    this.#fitToContent(true);\n    this.select();\n    this.parent.addInkEditorIfNeeded(true);\n    this.moveInDOM();\n    this.div.focus({\n      preventScroll: true\n    });\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    this.enableEditMode();\n  }\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n    this.setInForeground();\n    event.preventDefault();\n    if (!this.div.contains(document.activeElement)) {\n      this.div.focus({\n        preventScroll: true\n      });\n    }\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n  #endDrawing(event) {\n    this.canvas.removeEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.removeEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.removeEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown, {\n      signal: this._uiManager._signal\n    });\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n    }\n    this.#canvasContextMenuTimeoutId = setTimeout(() => {\n      this.#canvasContextMenuTimeoutId = null;\n      this.canvas.removeEventListener(\"contextmenu\", noContextMenu);\n    }, 10);\n    this.#stopDrawing(event.offsetX, event.offsetY);\n    this.addToAnnotationStorage();\n    this.setInBackground();\n  }\n  #createCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = \"inkEditorCanvas\";\n    this.canvas.setAttribute(\"data-l10n-id\", \"pdfjs-ink-canvas\");\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n    this._uiManager._signal.addEventListener(\"abort\", () => {\n      this.#observer?.disconnect();\n      this.#observer = null;\n    }, {\n      once: true\n    });\n  }\n  get isResizable() {\n    return !this.isEmpty() && this.#disableEditing;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.setAttribute(\"data-l10n-id\", \"pdfjs-ink\");\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n    this.#createCanvas();\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n      this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.div.classList.add(\"disabled\");\n    } else {\n      this.div.classList.add(\"editing\");\n      this.enableEditMode();\n    }\n    this.#createObserver();\n    return this.div;\n  }\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (this.#realWidth === roundedWidth && this.#realHeight === roundedHeight) {\n      return;\n    }\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n    this.canvas.style.visibility = \"hidden\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.fixAndSetPosition();\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n    this.#setCanvasDims();\n    this.#redraw();\n    this.canvas.style.visibility = \"visible\";\n    this.fixDims();\n  }\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(this.scaleFactor, 0, 0, this.scaleFactor, this.translationX * this.scaleFactor + padding, this.translationY * this.scaleFactor + padding);\n  }\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(control1[0], control1[1], control2[0], control2[1], second[0], second[1]);\n    }\n    return path2D;\n  }\n  static #toPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] += blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] + blX;\n          points[i + 1] = x + blY;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] += blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trX - points[i + 1];\n          points[i + 1] = trY - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n  static #fromPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] -= blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] - blY;\n          points[i + 1] = x - blX;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] -= blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trY - points[i + 1];\n          points[i + 1] = trX - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n  #serializePaths(s, tx, ty, rect) {\n    const paths = [];\n    const padding = this.thickness / 2;\n    const shiftX = s * tx + padding;\n    const shiftY = s * ty + padding;\n    for (const bezier of this.paths) {\n      const buffer = [];\n      const points = [];\n      for (let j = 0, jj = bezier.length; j < jj; j++) {\n        const [first, control1, control2, second] = bezier[j];\n        if (first[0] === second[0] && first[1] === second[1] && jj === 1) {\n          const p0 = s * first[0] + shiftX;\n          const p1 = s * first[1] + shiftY;\n          buffer.push(p0, p1);\n          points.push(p0, p1);\n          break;\n        }\n        const p10 = s * first[0] + shiftX;\n        const p11 = s * first[1] + shiftY;\n        const p20 = s * control1[0] + shiftX;\n        const p21 = s * control1[1] + shiftY;\n        const p30 = s * control2[0] + shiftX;\n        const p31 = s * control2[1] + shiftY;\n        const p40 = s * second[0] + shiftX;\n        const p41 = s * second[1] + shiftY;\n        if (j === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        points.push(p20, p21);\n        if (j === jj - 1) {\n          points.push(p40, p41);\n        }\n      }\n      paths.push({\n        bezier: InkEditor.#toPDFCoordinates(buffer, rect, this.rotation),\n        points: InkEditor.#toPDFCoordinates(points, rect, this.rotation)\n      });\n    }\n    return paths;\n  }\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = Util.bezierBoundingBox(...first, ...control1, ...control2, ...second);\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n    return [xMin, yMin, xMax, yMax];\n  }\n  #getPadding() {\n    return this.#disableEditing ? Math.ceil(this.thickness * this.parentScale) : 0;\n  }\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setAspectRatio(width, height);\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n    this.#realWidth = width;\n    this.#realHeight = height;\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(prevTranslationX - this.translationX - unscaledPadding, prevTranslationY - this.translationY - unscaledPadding);\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof InkAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.thickness = data.thickness;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n    const {\n      paths,\n      rect,\n      rotation\n    } = data;\n    for (let {\n      bezier\n    } of paths) {\n      bezier = InkEditor.#fromPDFCoordinates(bezier, rect, rotation);\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (bezier[i + 5] - padding);\n        path.push([[p0, p1], [p10, p11], [p20, p21], [p30, p31]]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n    return editor;\n  }\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n    return {\n      annotationType: AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(this.scaleFactor / this.parentScale, this.translationX, this.translationY, rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #observer = null;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static get supportedTypes() {\n    const types = [\"apng\", \"avif\", \"bmp\", \"gif\", \"jpeg\", \"png\", \"svg+xml\", \"webp\", \"x-icon\"];\n    return shadow(this, \"supportedTypes\", types.map(type => `image/${type}`));\n  }\n  static get supportedTypesStr() {\n    return shadow(this, \"supportedTypesStr\", this.supportedTypes.join(\",\"));\n  }\n  static isHandlingMimeForPasting(mime) {\n    return this.supportedTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor(AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (this.#canvas) {\n      this.div.focus();\n    }\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = StampEditor.supportedTypesStr;\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      this.#observer?.disconnect();\n      this.#observer = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded() {\n    this._isDraggable = true;\n    this.div.focus();\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (this.#bitmap) {\n      this.#createCanvas();\n    } else {\n      this.#getBitmap();\n    }\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    }\n    return this.div;\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    div.append(canvas);\n    div.hidden = false;\n    this.#drawBitmap(width, height);\n    this.#createObserver();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      canvas.setAttribute(\"aria-label\", this.#bitmapFileName);\n    }\n  }\n  #setDimensions(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setDims(width, height);\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap(width, height);\n    }, TIME_TO_WAIT);\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap(width, height) {\n    width = Math.ceil(width);\n    height = Math.ceil(height);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === width && canvas.height === height) {\n      return;\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(width, height);\n    if (this._uiManager.hasMLManager && !this.hasAltText()) {\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n      this._uiManager.mlGuess({\n        service: \"image-to-text\",\n        request: {\n          data: ctx.getImageData(0, 0, width, height).data,\n          width,\n          height,\n          channels: 4\n        }\n      }).then(response => {\n        const altText = response?.output || \"\";\n        if (this.parent && altText && !this.hasAltText()) {\n          this.altTextData = {\n            altText,\n            decorative: false\n          };\n        }\n      });\n    }\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n  }\n  getImageForAltText() {\n    return this.#canvas;\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  #createObserver() {\n    if (!this._uiManager._signal) {\n      return;\n    }\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.#setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n    this._uiManager._signal.addEventListener(\"abort\", () => {\n      this.#observer?.disconnect();\n      this.#observer = null;\n    }, {\n      once: true\n    });\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof StampAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.altTextData;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.altTextData;\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #boundPointerup = null;\n  #boundPointerdown = null;\n  #boundTextLayerPointerDown = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isCleaningUp = false;\n  #isDisabling = false;\n  #textLayer = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.addInkEditorIfNeeded(false);\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.disableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  addInkEditorIfNeeded(isCommitting) {\n    if (this.#uiManager.getMode() !== AnnotationEditorType.INK) {\n      return;\n    }\n    if (!isCommitting) {\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n    const editor = this.createAndAddNewEditor({\n      offsetX: 0,\n      offsetY: 0\n    }, false);\n    editor.setInBackground();\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  enable() {\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          editor.renderAnnotationElement(editable);\n          editor.show(false);\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#boundTextLayerPointerDown) {\n      this.#boundTextLayerPointerDown = this.#textLayerPointerDown.bind(this);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#boundTextLayerPointerDown, {\n        signal: this.#uiManager._signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#boundTextLayerPointerDown) {\n      this.#textLayer.div.removeEventListener(\"pointerdown\", this.#boundTextLayerPointerDown);\n      this.#boundTextLayerPointerDown = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    if (event.target === this.#textLayer.div) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", event);\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#boundPointerdown) {\n      return;\n    }\n    const signal = this.#uiManager._signal;\n    this.#boundPointerdown = this.pointerdown.bind(this);\n    this.#boundPointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerdown\", this.#boundPointerdown, {\n      signal\n    });\n    this.div.addEventListener(\"pointerup\", this.#boundPointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    if (!this.#boundPointerdown) {\n      return;\n    }\n    this.div.removeEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.removeEventListener(\"pointerup\", this.#boundPointerup);\n    this.#boundPointerdown = null;\n    this.#boundPointerup = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(false);\n    }\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  get _signal() {\n    return this.#uiManager._signal;\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    this.#uiManager.updateMode(mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  deserialize(data) {\n    return AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor() {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    if (this.#uiManager.getMode() === AnnotationEditorType.STAMP) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n    this.addInkEditorIfNeeded(false);\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #id = 0;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, {\n    x = 0,\n    y = 0,\n    width = 1,\n    height = 1\n  } = {}) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG(box) {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    DrawLayer.#setBox(svg, box);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  highlight(outlines, color, opacity, isPathUpdatable = false) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add(\"highlight\");\n    if (outlines.free) {\n      root.classList.add(\"free\");\n    }\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"d\", outlines.toSVGPath());\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = this.#createClipPath(defs, pathId);\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    root.setAttribute(\"fill\", color);\n    root.setAttribute(\"fill-opacity\", opacity);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  highlightOutline(outlines) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add(\"highlightOutline\");\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"d\", outlines.toSVGPath());\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (outlines.free) {\n      root.classList.add(\"free\");\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeLine(id, line) {\n    const path = this.#toUpdate.get(id);\n    this.#toUpdate.delete(id);\n    this.updateBox(id, line.box);\n    path.setAttribute(\"d\", line.toSVGPath());\n  }\n  updateLine(id, line) {\n    const root = this.#mapping.get(id);\n    const defs = root.firstChild;\n    const path = defs.firstChild;\n    path.setAttribute(\"d\", line.toSVGPath());\n  }\n  removeFreeHighlight(id) {\n    this.remove(id);\n    this.#toUpdate.delete(id);\n  }\n  updatePath(id, line) {\n    this.#toUpdate.get(id).setAttribute(\"d\", line.toSVGPath());\n  }\n  updateBox(id, box) {\n    DrawLayer.#setBox(this.#mapping.get(id), box);\n  }\n  show(id, visible) {\n    this.#mapping.get(id).classList.toggle(\"hidden\", !visible);\n  }\n  rotate(id, angle) {\n    this.#mapping.get(id).setAttribute(\"data-main-rotation\", angle);\n  }\n  changeColor(id, color) {\n    this.#mapping.get(id).setAttribute(\"fill\", color);\n  }\n  changeOpacity(id, opacity) {\n    this.#mapping.get(id).setAttribute(\"fill-opacity\", opacity);\n  }\n  addClass(id, className) {\n    this.#mapping.get(id).classList.add(className);\n  }\n  removeClass(id, className) {\n    this.#mapping.get(id).classList.remove(className);\n  }\n  remove(id) {\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\nconst pdfjsVersion = \"4.4.168\";\nconst pdfjsBuild = \"19fbc8998\";\n\nvar __webpack_exports__AbortException = __webpack_exports__.AbortException;\nvar __webpack_exports__AnnotationEditorLayer = __webpack_exports__.AnnotationEditorLayer;\nvar __webpack_exports__AnnotationEditorParamsType = __webpack_exports__.AnnotationEditorParamsType;\nvar __webpack_exports__AnnotationEditorType = __webpack_exports__.AnnotationEditorType;\nvar __webpack_exports__AnnotationEditorUIManager = __webpack_exports__.AnnotationEditorUIManager;\nvar __webpack_exports__AnnotationLayer = __webpack_exports__.AnnotationLayer;\nvar __webpack_exports__AnnotationMode = __webpack_exports__.AnnotationMode;\nvar __webpack_exports__CMapCompressionType = __webpack_exports__.CMapCompressionType;\nvar __webpack_exports__ColorPicker = __webpack_exports__.ColorPicker;\nvar __webpack_exports__DOMSVGFactory = __webpack_exports__.DOMSVGFactory;\nvar __webpack_exports__DrawLayer = __webpack_exports__.DrawLayer;\nvar __webpack_exports__FeatureTest = __webpack_exports__.FeatureTest;\nvar __webpack_exports__GlobalWorkerOptions = __webpack_exports__.GlobalWorkerOptions;\nvar __webpack_exports__ImageKind = __webpack_exports__.ImageKind;\nvar __webpack_exports__InvalidPDFException = __webpack_exports__.InvalidPDFException;\nvar __webpack_exports__MissingPDFException = __webpack_exports__.MissingPDFException;\nvar __webpack_exports__OPS = __webpack_exports__.OPS;\nvar __webpack_exports__Outliner = __webpack_exports__.Outliner;\nvar __webpack_exports__PDFDataRangeTransport = __webpack_exports__.PDFDataRangeTransport;\nvar __webpack_exports__PDFDateString = __webpack_exports__.PDFDateString;\nvar __webpack_exports__PDFWorker = __webpack_exports__.PDFWorker;\nvar __webpack_exports__PasswordResponses = __webpack_exports__.PasswordResponses;\nvar __webpack_exports__PermissionFlag = __webpack_exports__.PermissionFlag;\nvar __webpack_exports__PixelsPerInch = __webpack_exports__.PixelsPerInch;\nvar __webpack_exports__RenderingCancelledException = __webpack_exports__.RenderingCancelledException;\nvar __webpack_exports__TextLayer = __webpack_exports__.TextLayer;\nvar __webpack_exports__UnexpectedResponseException = __webpack_exports__.UnexpectedResponseException;\nvar __webpack_exports__Util = __webpack_exports__.Util;\nvar __webpack_exports__VerbosityLevel = __webpack_exports__.VerbosityLevel;\nvar __webpack_exports__XfaLayer = __webpack_exports__.XfaLayer;\nvar __webpack_exports__build = __webpack_exports__.build;\nvar __webpack_exports__createValidAbsoluteUrl = __webpack_exports__.createValidAbsoluteUrl;\nvar __webpack_exports__fetchData = __webpack_exports__.fetchData;\nvar __webpack_exports__getDocument = __webpack_exports__.getDocument;\nvar __webpack_exports__getFilenameFromUrl = __webpack_exports__.getFilenameFromUrl;\nvar __webpack_exports__getPdfFilenameFromUrl = __webpack_exports__.getPdfFilenameFromUrl;\nvar __webpack_exports__getXfaPageViewport = __webpack_exports__.getXfaPageViewport;\nvar __webpack_exports__isDataScheme = __webpack_exports__.isDataScheme;\nvar __webpack_exports__isPdfFile = __webpack_exports__.isPdfFile;\nvar __webpack_exports__noContextMenu = __webpack_exports__.noContextMenu;\nvar __webpack_exports__normalizeUnicode = __webpack_exports__.normalizeUnicode;\nvar __webpack_exports__renderTextLayer = __webpack_exports__.renderTextLayer;\nvar __webpack_exports__setLayerDimensions = __webpack_exports__.setLayerDimensions;\nvar __webpack_exports__shadow = __webpack_exports__.shadow;\nvar __webpack_exports__updateTextLayer = __webpack_exports__.updateTextLayer;\nvar __webpack_exports__version = __webpack_exports__.version;\nexport { __webpack_exports__AbortException as AbortException, __webpack_exports__AnnotationEditorLayer as AnnotationEditorLayer, __webpack_exports__AnnotationEditorParamsType as AnnotationEditorParamsType, __webpack_exports__AnnotationEditorType as AnnotationEditorType, __webpack_exports__AnnotationEditorUIManager as AnnotationEditorUIManager, __webpack_exports__AnnotationLayer as AnnotationLayer, __webpack_exports__AnnotationMode as AnnotationMode, __webpack_exports__CMapCompressionType as CMapCompressionType, __webpack_exports__ColorPicker as ColorPicker, __webpack_exports__DOMSVGFactory as DOMSVGFactory, __webpack_exports__DrawLayer as DrawLayer, __webpack_exports__FeatureTest as FeatureTest, __webpack_exports__GlobalWorkerOptions as GlobalWorkerOptions, __webpack_exports__ImageKind as ImageKind, __webpack_exports__InvalidPDFException as InvalidPDFException, __webpack_exports__MissingPDFException as MissingPDFException, __webpack_exports__OPS as OPS, __webpack_exports__Outliner as Outliner, __webpack_exports__PDFDataRangeTransport as PDFDataRangeTransport, __webpack_exports__PDFDateString as PDFDateString, __webpack_exports__PDFWorker as PDFWorker, __webpack_exports__PasswordResponses as PasswordResponses, __webpack_exports__PermissionFlag as PermissionFlag, __webpack_exports__PixelsPerInch as PixelsPerInch, __webpack_exports__RenderingCancelledException as RenderingCancelledException, __webpack_exports__TextLayer as TextLayer, __webpack_exports__UnexpectedResponseException as UnexpectedResponseException, __webpack_exports__Util as Util, __webpack_exports__VerbosityLevel as VerbosityLevel, __webpack_exports__XfaLayer as XfaLayer, __webpack_exports__build as build, __webpack_exports__createValidAbsoluteUrl as createValidAbsoluteUrl, __webpack_exports__fetchData as fetchData, __webpack_exports__getDocument as getDocument, __webpack_exports__getFilenameFromUrl as getFilenameFromUrl, __webpack_exports__getPdfFilenameFromUrl as getPdfFilenameFromUrl, __webpack_exports__getXfaPageViewport as getXfaPageViewport, __webpack_exports__isDataScheme as isDataScheme, __webpack_exports__isPdfFile as isPdfFile, __webpack_exports__noContextMenu as noContextMenu, __webpack_exports__normalizeUnicode as normalizeUnicode, __webpack_exports__renderTextLayer as renderTextLayer, __webpack_exports__setLayerDimensions as setLayerDimensions, __webpack_exports__shadow as shadow, __webpack_exports__updateTextLayer as updateTextLayer, __webpack_exports__version as version };\n\n//# sourceMappingURL=pdf.mjs.map"],"names":["exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","globalThis","pdfjsLib","d","AbortException","AnnotationEditorLayer","AnnotationEditorParamsType","AnnotationEditorType","AnnotationEditorUIManager","AnnotationLayer","AnnotationMode","CMapCompressionType","ColorPicker","DOMSVGFactory","DrawLayer","FeatureTest","GlobalWorkerOptions","ImageKind","InvalidPDFException","MissingPDFException","OPS","Outliner","PDFDataRangeTransport","PDFDateString","PDFWorker","PasswordResponses","PermissionFlag","PixelsPerInch","RenderingCancelledException","TextLayer","UnexpectedResponseException","Util","VerbosityLevel","XfaLayer","build","createValidAbsoluteUrl","fetchData","getDocument","getFilenameFromUrl","getPdfFilenameFromUrl","getXfaPageViewport","isDataScheme","isPdfFile","noContextMenu","normalizeUnicode","renderTextLayer","setLayerDimensions","shadow","updateTextLayer","version","isNodeJS","process","versions","nw","electron","type","IDENTITY_MATRIX","FONT_IDENTITY_MATRIX","LINE_FACTOR","RenderingIntentFlag","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","TextRenderingMode","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","AnnotationBorderStyleType","ERRORS","WARNINGS","INFOS","BINARY","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","NEED_PASSWORD","INCORRECT_PASSWORD","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","info","msg","console","log","warn","unreachable","Error","assert","cond","url","baseUrl","options","addDefaultProtocol","startsWith","dots","match","length","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","URL","protocol","_isValidProtocol","value","nonSerializable","configurable","writable","BaseException","message","name","this","constructor","PasswordException","code","super","UnknownErrorException","details","status","FormatError","bytesToString","bytes","undefined","MAX_ARGUMENT_COUNT","String","fromCharCode","apply","strBuf","i","chunkEnd","Math","min","chunk","subarray","push","join","stringToBytes","str","Uint8Array","charCodeAt","objectFromMap","map","create","util_FeatureTest","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","Function","isOffscreenCanvasSupported","OffscreenCanvas","platform","navigator","isMac","includes","isCSSRoundSupported","CSS","supports","hexNumbers","Array","from","keys","n","toString","padStart","static","r","g","b","minMax","temp","m1","m2","p","m","p1","applyTransform","p2","slice","p3","p4","max","transpose","a","c","first","second","sqrt","sx","sy","rect","rect1","rect2","xLow","xHigh","yLow","yHigh","x0","x1","x2","x3","y0","y1","y2","y3","t","mt","tt","ttt","x","y","abs","delta","sqrtDelta","a2","NormalizeRegex","NormalizationMap","Map","replaceAll","_","normalize","AnnotationPrefix","FontRenderOps","BaseFilterFactory","addFilter","maps","addHCMFilter","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","destroy","keepHCM","BaseCanvasFactory","enableHWA","width","height","canvas","_createCanvas","context","getContext","willReadFrequently","reset","canvasAndContext","BaseCMapReaderFactory","isCompressed","async","compressionType","_fetchData","catch","reason","BaseStandardFontDataFactory","filename","BaseSVGFactory","skipDimensions","svg","_createSVG","setAttribute","createElement","SVG_NS","PDF","isValidFetchUrl","document","baseURI","response","fetch","ok","statusText","arrayBuffer","blob","json","text","Promise","resolve","reject","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","send","DOMCMapReaderFactory","then","data","cMapData","ArrayBuffer","DOMStandardFontDataFactory","createElementNS","PageViewport","viewBox","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","rawDims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","applyInverseTransform","extraDelay","ii","trim","substring","toLowerCase","test","split","lastIndexOf","defaultFilename","reFilename","splitURI","exec","suggestedFilename","StatTimer","started","times","time","Date","now","timeEnd","start","end","outBuf","longest","padEnd","e","preventDefault","deprecated","pdfDateStringRegex","input","RegExp","matches","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","xfaPage","attributes","style","getRGB","color","colorRGB","getCurrentTransform","ctx","f","getTransform","getCurrentTransformInverse","invertSelf","div","viewport","mustFlip","mustRotate","useRound","w","h","widthStr","heightStr","EditorToolbar","editor","render","editToolbar","className","signal","_uiManager","_signal","addEventListener","buttons","append","position","toolbarPosition","direction","insetInlineEnd","top","stopPropagation","_focusEventsAllowed","element","bind","capture","hide","classList","add","hideDropdown","show","remove","button","tabIndex","editorType","delete","divider","addAltTextButton","prepend","addColorPicker","colorPicker","renderButton","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","id","ImageManager","crypto","randomUUID","buf","getRandomValues","floor","random","getUuid","_isSVGFittingCanvas","image","Image","src","decode","drawImage","getImageData","rawData","bitmap","refCounter","isSvg","file","mustRemoveAspectRatioPromise","fileReader","FileReader","imageElement","imagePromise","onload","svgUrl","result","onerror","readAsDataURL","createImageBitmap","error","set","lastModified","size","getFromFile","getFromUrl","getSvgUrl","deleteId","isValidId","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","next","splice","redo","hasSomethingToUndo","hasSomethingToRedo","KeyboardManager","callbacks","allKeys","Set","callback","isMacKey","at","event","altKey","ctrlKey","metaKey","shiftKey","self","has","bubbles","args","checker","ColorManager","_colors","colors","visibility","body","computedColor","window","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","every","_colorsMapping","getHexCode","makeHexColor","AbortController","blur","focus","copy","cut","paste","keydown","keyup","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_keyboardManager","proto","arrowChecker","contains","activeElement","tagName","hasSomethingToControl","textInputChecker","_self","target","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","mlManager","_eventBus","_on","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","abort","_off","layer","values","clear","clearTimeout","guess","hasMLManager","hcmFilter","foreground","background","pair","highlightColorNames","reverse","setMainHighlightColorPicker","editAltText","pageNumber","focusMainContainer","findParent","layerX","layerY","getBoundingClientRect","disableUserSelect","toggle","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","anchorNode","nodeType","Node","TEXT_NODE","parentElement","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","textLayer","closest","getSelectionBoxes","empty","dispatch","source","mode","showAllEditors","hasTextLayer","createAndAddNewEditor","addToAnnotationStorage","setValue","pointerup","removeEventListener","hasSelection","lastEditor","lastActiveElement","once","dragOver","drop","addEditListeners","removeEditListeners","dataTransfer","items","isHandlingMimeForPasting","dropEffect","item","currentLayer","editors","serialized","serialize","clipboardData","setData","JSON","stringify","getData","parse","ex","isArray","newEditors","deserializedEditor","deserialize","addCommands","isEditorHandlingKeyboard","entries","some","assign","setEditingState","registerEditorTypes","types","defaultPropertiesToUpdate","getId","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","annotationElementId","setSelected","enterInEditMode","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateParams","updateColor","action","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","setTimeout","unselect","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","ed","updateUI","toggleSelected","select","isSelected","firstSelectedEditor","params","commit","noCommit","totalX","totalY","translateInPage","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","AltText","l10nPromise","_l10nPromise","altText","textContent","onClick","finish","focusVisible","decorative","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","_reportTelemetry","innerText","parentNode","getImageForAltText","AnnotationEditor","focusin","focusout","_initialOptions","_isVisible","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","getPrototypeOf","_type","_defaultLineColor","_colorManager","fakeEditor","FakeEditor","getNextId","l10n","strings","_borderLineWidth","documentElement","parseFloat","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","translate","scrollIntoView","block","findNewParent","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_mustFixPosition","moveInDOM","angle","pageTranslationToScreen","parentScale","scaledWidth","scaledHeight","round","setDims","fixDims","widthPercent","endsWith","heightPercent","getInitialTranslation","classes","boundResizerPointermove","savedDraggable","pointerMoveOptions","passive","togglePointerEvents","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","newWidth","newHeight","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","movementX","movementY","oldDiag","hypot","altTextFinish","removeEditToolbar","getClientDimensions","initialize","addEditToolbar","altTextData","hasAltText","maxWidth","maxHeight","pointerdown","pointerMoveCallback","clientX","clientY","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","disableEditMode","isInEditMode","needsToBeRebuilt","rotate","_angle","isForCopying","accessibilityData","timeout","isResizable","makeResizable","children","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","firstChild","before","lastChild","child","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","querySelector","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","freeze","hash","transfer","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","entry","val","getAll","setAll","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","structuredClone","FontLoader","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","systemFontInfo","_inspectFont","loadedName","disableFontFace","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","font","attached","missingFile","loadSystemFont","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","supported","userAgent","done","complete","otherRequest","shift","_loadTestFont","atob","int32","offset","spliceString","s","insert","called","XXXX_VALUE","checksum","btoa","fontFamily","isFontReady","fillText","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","weight","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","cmds","commands","bezierCurveTo","quadraticCurveTo","packageCapability","withResolvers","packageMap","fs","import","http","https","path2d","loadPackages","NodePackages","promise","node_utils_fetchData","promises","readFile","PathType","applyBoundingBox","bbox","region","Path2D","BaseShadingPattern","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","matrix","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","ceil","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","k","x1_","x2_","j","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","singularValueDecompose2dScale","matrixScale","temporaryPatternCanvas","DummyShadingPattern","PaintType","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","curMatrixScale","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","adjustedX0","adjustedY0","adjustedX1","adjustedY1","clipBbox","executeOperatorList","endDrawing","step","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","updateRectMinMax","strokeStyle","fillColor","strokeColor","cssColor","convertBlackAndWhiteToRGBA","srcPos","dest","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","CachedCanvases","canvasFactory","cache","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","startNewPathAndClipBox","clipBox","setCurrentPoint","updatePathMinMax","minX","maxX","updateScalingPathMinMax","scaleMinMax","updateCurvePathMinMax","bezierBoundingBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","intersect","isEmptyClip","Infinity","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","mask","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","filter","getImageSmoothingEnabled","interpolate","fround","actualScale","devicePixelRatio","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","res","xobjs","groupStack","processingType3","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","hcmFilterId","savedFilter","_scaleImage","img","inverseTransform","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","scaled","maskCanvas","mainKey","cachedImage","maskToCanvas","getAxialAlignedBoundingBox","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","limit","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","pop","ops","startX","startY","isScalingMatrix","minMaxForBezier","xw","yh","consumePath","rescaleAndStroke","needRestore","paths","pendingTextPaths","path","addToPath","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternTransform","fillStrokeMode","isAddToPathSet","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","arguments","objId","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","canvasWidth","canvasHeight","annotationCanvas","savedCtx","compiled","POINT_TYPES","width1","j0","points","lineSize","pos","sum","Int32Array","p0","pp","compileType3Glyph","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","op","workerPort","Worker","workerSrc","CallbackKind","StreamKind","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","stream","capability","cbSourceName","cbTargetName","postMessage","on","actionName","handler","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancel","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","close","onPull","onCancel","success","streamController","allSettled","Metadata","parsedData","getRaw","INTERNAL","Symbol","OptionalContentGroup","renderingIntent","usage","view","viewState","printState","_setVisible","internal","userSet","OptionalContentConfig","creator","order","groups","baseState","off","getHash","array","operator","state","expression","policy","ids","setVisibility","setOCGState","preserveRB","hasInitialVisibility","getOrder","getGroups","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","evt","onProgress","_removeRangeReader","reader","indexOf","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","requestCapability","_end","_queuedChunk","validateRangeRequestCapabilities","getResponseHeader","isHttp","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","iter","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","quotindex","extvalue","encodingend","replace","charset","hex","getFilenameFromContentDispositionHeader","createResponseStatusError","validateResponseStatus","createFetchOptions","headers","withCredentials","abortController","method","credentials","redirect","createHeaders","httpHeaders","Headers","getArrayBuffer","PDFFetchStream","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","_headers","getReader","read","_readCapability","NetworkManager","currXhrId","pendingRequests","requestRange","listeners","requestFull","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_onHeadersReceived","_onDone","_onError","_url","_fullRequestId","_headersReceivedCapability","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","lengthComputable","_requestId","_close","fileUriRegex","PDFNodeStream","sourceUrl","parsedUrl","host","parseUrl","isFsUrl","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","_readableStream","_error","_setReadableStream","readableStream","BaseRangeReader","createRequestOptions","auth","hostname","port","handleResponse","statusCode","_request","_httpHeaders","Range","href","lstat","stat","createReadStream","DEFAULT_FONT_SIZE","FontInspector","WeakMap","textContentSource","prevFontSize","prevFontFamily","pump","lang","styles","onBefore","abortEx","textDivs","textContentItemsStr","geom","textDiv","textDivProperties","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","canvasContext","alpha","opacity","lineHeight","cachedAscent","savedFont","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","pixels","rest","restKeys","XfaText","xfa","output","walk","node","shouldBuildText","DEFAULT_RANGE_CHUNK_SIZE","DefaultCanvasFactory","createCanvas","DefaultCMapReaderFactory","DefaultFilterFactory","docId","contain","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","arr","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","prev","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","DefaultStandardFontDataFactory","task","PDFDocumentLoadingTask","location","getUrlProp","Buffer","isNaN","getDataProp","password","rangeTransport","worker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","fontExtraProperties","enableXfa","disableAutoFetch","pdfBug","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","workerParams","fromPort","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","Response","isFetchSupported","createPDFNetworkStream","workerId","transport","WorkerTransport","_transport","_capability","isRefProxy","ref","num","gen","onPassword","_pendingDestroy","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","listener","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","cleanup","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","PDFObjects","_maybeCleanupAfterRender","_intentStates","userUnit","getViewport","getAnnotations","getPageJSActions","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","all","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getXfa","getStructTree","_destroy","waitOn","force","completed","resetStats","delayed","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","LoopbackPort","terminate","PDFWorkerUtil","isWorkerDisabled","fakeWorkerId","isSameOrigin","otherUrl","base","origin","other","createCDNWrapper","wrapper","createObjectURL","Blob","_port","_webWorker","_messageHandler","_initializeFromPort","_initialize","_setupFakeWorker","terminateEarly","ac","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","pdfjsWorker","loader","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cachedPromise","isOpList","page","terminated","sink","readyReason","headersCapability","fullReader","_numPages","htmlForXfa","exception","updatePassword","exportedData","exportedError","fontAdded","finally","imageRef","pageProxy","dataLen","imageData","refStr","results","metadata","INITIAL_DATA","iterator","RenderTask","onContinue","form","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","StepperManager","init","getNextBreakPoint","gfx","cancelAnimationFrame","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","G","components","CMYK_RGB","RGB_HTML","html","storage","storedData","xfaOn","xfaOff","removeAttribute","checked","option","selected","selectedIndex","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","setupStorage","root","xfaHtml","rootHtml","setAttributes","isNotForRichText","rootDiv","createTextNode","stack","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","GetElementsByNameSet","getRectDims","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","titleObj","contentsObj","richText","hasPopupData","_hasPopupData","updateEdited","popup","resetEdited","currentRect","setRotation","popupRef","alternativeText","title","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","normalizeRect","elementWidth","elementHeight","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","defs","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_isEditable","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","attachmentDest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","description","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","index","findIndex","selectChild","indices","editable","changeEx","keyDown","PopupElement","elementIds","toDateObject","trigger","flatMap","baseColor","outlineColor","BACKGROUND_ENLIGHT","header","date","toLocaleDateString","toLocaleTimeString","contents","_formatContents","popupLines","popupContent","lineAttributes","line","lines","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","vertices","polyline","inkLists","inkList","accessibilityManager","annotationEditorUIManager","_annotationEditorUIManager","contentElement","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","replaceWith","after","getEditableAnnotations","getEditableAnnotation","EOL_PATTERN","FreeTextEditor","editorDivBlur","editorDivFocus","editorDivInput","editorDivKeydown","editorDivPaste","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","setFontsize","editorDiv","savedFontsize","col","savedColor","overlayDiv","contentEditable","childNodes","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","dblclick","baseX","baseY","posX","posY","nodeValue","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","beforeLength","reduce","acc","setStart","setEnd","removeAllRanges","addRange","replaceChildren","padding","structTreeParentId","innerMargin","EPSILON","right","shiftedMinX","shiftedMinY","lastEdge","lastPoint","edge","getOutlines","sort","outlineVerticalEdges","edges","allEdges","edge1","edge2","outlines","outline","lastPointX","lastPointY","HighlightOutline","middle","jj","y4","Outline","toSVGPath","_rotation","free","FreeHighlightOutline","polygon","prevX","prevY","FreeOutliner","Float64Array","scaleFactor","thickness","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","bottom","lastTopX","lastTopY","lastBottomX","lastBottomY","last","N","ltrCallback","getNewOutline","outliner","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","swatch","renderMainDropdown","dropdown","role","nextSibling","HighlightEditor","_moveCaret","_defaultThickness","_defaultOpacity","highlightId","numberOfColors","outlinerForOutline","highlightOutlines","clipPathId","drawLayer","finalizeLine","highlightOutline","updateLine","updateBox","changeColor","savedThickness","setThickness","th","toolbar","addUndoableEditor","mustBeSelected","highlight","highlightDiv","pointerover","addClass","pointerleave","removeClass","setPosition","Float32Array","pointerMove","pointerDownOptions","pointerDown","_freeHighlight","_freeHighlightId","_freeHighlightClipId","updatePath","removeFreeHighlight","InkEditor","canvasPointermove","canvasPointerleave","canvasPointerup","canvasPointerdown","bezierPath2D","allRawPaths","currentPath","translationX","translationY","setOpacity","savedOpacity","disconnect","setDimensions","opacityToHex","path2D","bezier","xy","lastPoints","bezierPoints","control1","control2","addInkEditorIfNeeded","ResizeObserver","contentRect","observe","roundedWidth","roundedHeight","scaleFactorW","scaleFactorH","p10","p11","p20","p21","p30","p31","p40","p41","xMin","xMax","yMin","yMax","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","StampEditor","bitmapUrl","bitmapFile","supportedTypes","supportedTypesStr","pasteEditor","getAsFile","fromId","getFromId","accept","files","click","MAX_RATIO","factor","bitmapWidth","bitmapHeight","prevWidth","prevHeight","offscreen","transferToImageBitmap","mlGuess","service","channels","toUrl","toDataURL","bitmapId","alt","stamps","area","prevData","_editorType","annotationLayer","editorTypes","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","isCommitting","annotationElementIds","editables","changedAnnotations","resetAnnotations","startHighlighting","attach","detach","removePointerInTextLayer","deleteAnnotationElement","innerWidth","innerHeight","oldRotation","_svgFactory","pathId","clipPathUse","isPathUpdatable","use","maskId","use1","use2","cloneNode","changeOpacity","__webpack_exports__AnnotationLayer","__webpack_exports__AnnotationMode","__webpack_exports__GlobalWorkerOptions","__webpack_exports__PDFDataRangeTransport","__webpack_exports__TextLayer","__webpack_exports__getDocument"],"sourceRoot":""}